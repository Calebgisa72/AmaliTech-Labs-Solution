{% extends "base.html" %} {% block content %}
<div
  class="max-w-4xl mx-auto bg-white shadow-xl rounded-lg overflow-hidden mt-10"
>
  <div
    class="px-6 py-4 border-b border-gray-200 bg-gray-50 flex justify-between items-center"
  >
    <h1 class="text-2xl font-bold text-gray-800">To-Do List</h1>
    <a
      href="{% url 'create_todo' %}"
      class="bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded inline-flex items-center transition duration-300"
    >
      <svg
        class="w-4 h-4 mr-2"
        fill="none"
        stroke="currentColor"
        viewBox="0 0 24 24"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M12 4v16m8-8H4"
        ></path>
      </svg>
      Create Todo
    </a>
  </div>

  <form method="post" action="{% url 'bulk_todos' %}">
    {% csrf_token %}

    <div class="p-4 bg-gray-100 border-b border-gray-200 flex space-x-2">
      <button
        type="submit"
        name="action"
        value="mark_completed"
        class="bg-blue-500 hover:bg-blue-600 text-white font-semibold py-2 px-4 rounded shadow text-sm flex items-center transition duration-300"
      >
        <svg
          class="w-4 h-4 mr-2"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M5 13l4 4L19 7"
          ></path>
        </svg>
        Mark Completed
      </button>
      <button
        type="submit"
        name="action"
        value="delete"
        class="bg-red-500 hover:bg-red-600 text-white font-semibold py-2 px-4 rounded shadow text-sm flex items-center transition duration-300"
      >
        <svg
          class="w-4 h-4 mr-2"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"
          ></path>
        </svg>
        Delete Selected
      </button>
    </div>

    <div class="overflow-x-auto">
      <table class="min-w-full leading-normal">
        <thead>
          <tr>
            <th
              class="px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider w-10"
            >
              <!-- spacer for checkbox -->
            </th>
            <th
              class="px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider"
            >
              Task
            </th>
            <th
              class="px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider"
            >
              Status
            </th>
            <th
              class="px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider"
            >
              Actions
            </th>
          </tr>
        </thead>
        <tbody>
          {% for item in todo_items %}
          <tr class="hover:bg-gray-50 transition duration-150">
            <td class="px-5 py-3 border-b border-gray-200 text-sm">
              <input
                type="checkbox"
                name="todo_ids"
                value="{{ item.id }}"
                class="form-checkbox h-5 w-5 text-green-600 rounded"
              />
            </td>
            <td class="px-5 py-3 border-b border-gray-200 text-sm">
              <p class="text-gray-900 whitespace-no-wrap font-medium">
                {{ item.title }}
              </p>
            </td>
            <td class="px-5 py-3 border-b border-gray-200 text-sm">
              {% if item.completed %}
              <span
                class="relative inline-block px-3 py-1 font-semibold text-green-900 leading-tight"
              >
                <span
                  aria-hidden="true"
                  class="absolute inset-0 bg-green-200 opacity-50 rounded-full"
                ></span>
                <span class="relative">Completed</span>
              </span>
              {% else %}
              <span
                class="relative inline-block px-3 py-1 font-semibold text-yellow-900 leading-tight"
              >
                <span
                  aria-hidden="true"
                  class="absolute inset-0 bg-yellow-200 opacity-50 rounded-full"
                ></span>
                <span class="relative">Pending</span>
              </span>
              {% endif %}
            </td>
            <td
              class="px-5 py-3 border-b border-gray-200 text-sm flex space-x-4 items-center h-full"
            >
              {% if item.completed %}
              <a
                href="{% url 'update_todo' item.id 'pending' %}"
                title="Mark as Pending"
                class="text-yellow-600 hover:text-yellow-900 transform hover:scale-110 transition duration-200"
              >
                <svg
                  class="w-6 h-6"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"
                  ></path>
                </svg>
              </a>
              {% else %}
              <a
                href="{% url 'update_todo' item.id 'completed' %}"
                title="Mark as Completed"
                class="text-green-600 hover:text-green-900 transform hover:scale-110 transition duration-200"
              >
                <svg
                  class="w-6 h-6"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M5 13l4 4L19 7"
                  ></path>
                </svg>
              </a>
              {% endif %}

              <a
                href="{% url 'delete_todo' item.id %}"
                title="Delete"
                class="text-red-600 hover:text-red-900 transform hover:scale-110 transition duration-200"
              >
                <svg
                  class="w-6 h-6"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"
                  ></path>
                </svg>
              </a>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </form>
</div>
{% endblock %}
